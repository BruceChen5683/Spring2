<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="american" class="com.battlecall.spring.American">
    </bean>

    <bean id="chinese" class="com.battlecall.spring.Chinese">
    </bean>

    <!--依赖-->
    <bean class="com.battlecall.spring.test2.ConcreateToolA" id="toolA">
        <property name="name" value="test"></property>
    </bean>
    <bean class="com.battlecall.spring.test2.ConcreateToolB" id="toolB">
        <property name="name">
            <value>B的值</value>
        </property>
    </bean>
    <bean class="com.battlecall.spring.test2.Chinese" id="chinese2" autowire="default">
        <!--构造-->
        <!--<constructor-arg name="tool"><ref bean="toolB"></ref></constructor-arg>-->
        <property name="tool" ref="toolB"></property>
    </bean>

    <!--prototype 用一次创建一次，singleton只有一个-->
    <!---->
    <bean class="com.battlecall.spring.test3.Dog" id="dog" scope="singleton"></bean>
    <bean class="com.battlecall.spring.test3.Chinese" id="chinese3">
        <property name="list">
            <list>
                <value>a</value>
                <value>b</value>
                <ref bean="dog"></ref>
               <bean class="com.battlecall.spring.test3.Dog"></bean>
            </list>
        </property>

        <property name="map">
            <map>
                <entry key="cjl">
                    <value>hy</value>
                </entry>
                <entry key="hy">
                    <value>cjl</value>
                </entry>
                <entry key="cjl">
                    <value>none</value>
                </entry>
            </map>
        </property>
        <property name="properties">
            <props>
                <prop key="key1">value1</prop>
                <prop key="key2">value2</prop>
            </props>
        </property>
        <property name="set">
            <set>
                <value>value1</value>
                <value>value2</value>
                <ref bean="dog"></ref>
                <!--引用，此处添加无效-->
                <ref bean="dog"></ref>
            </set>
        </property>
    </bean>


    <!--生命周期-->
    <bean class="com.battlecall.spring.test5.ConcreateTool" id="concreateTool"></bean>
    <bean class="com.battlecall.spring.test5.Chinese" id="life_chinese" init-method="myInit" destroy-method="myDestroy">
        <property name="tool">
            <ref bean="concreateTool"></ref>
        </property>
    </bean>



    <!--前置　后置　　环绕-->
    <bean class="com.battlecall.spring.aop.PersonImpl" id="personTarget">
        <property name="name" value="jade"></property>
        <property name="address" value="朱陈村"></property>
    </bean>

    <bean class="com.battlecall.spring.aop.MyMethodBeforeAdvice" id="myMethodBeforeAdvice"></bean>
    <bean class="com.battlecall.spring.aop.MyMethodAfterAdvice" id="myMethodAfterAdvice"></bean>
    <bean class="com.battlecall.spring.aop.MyArroundAdvice" id="myArroundAdvice"></bean>

    <bean class="org.springframework.aop.framework.ProxyFactoryBean" id="person">
        <property name="proxyInterfaces">
            <value>com.battlecall.spring.aop.Person</value>
        </property>

        <!--代理谁-->
        <property name="target">
            <ref bean="personTarget"></ref>
        </property>

        <!--环绕通知　以及前置、后置通知顺序关系　　和list中的value顺序相关-->
        <property name="interceptorNames">
            <list>
                <value>myArroundAdvice</value>
                <value>myMethodBeforeAdvice</value>
                <value>myMethodAfterAdvice</value>
            </list>
        </property>
    </bean>



    <bean class="com.battlecall.spring.exception.Dog" id="dogTarget"></bean>
    <bean class="com.battlecall.spring.exception.TransationManager" id="transationManager"></bean>
    <bean id="dog2" class="org.springframework.aop.framework.ProxyFactoryBean">
        <property name="target">
            <ref bean="dogTarget"></ref>
        </property>
        <property name="interceptorNames">
            <list>
                <value>transationManager</value>
            </list>
        </property>

        <!--<property name="proxyTargetClass" value="true"></property>-->
    </bean>

</beans>